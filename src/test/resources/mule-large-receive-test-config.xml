<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mule-configuration PUBLIC "-//SymphonySoft //DTD mule-configuration XML V1.0//EN"
"http://www.symphonysoft.com/dtds/mule/mule-configuration.dtd">
<mule-configuration id="SFTP_TEST" version="1.0">
	<description>Sftp testing.</description>

	<mule-environment-properties synchronous="true" />
	
	
	<!-- SFTP-connector -->
	<connector name="sftpConnector"
		className="org.mule.providers.sftp.SftpConnector">
		<properties>
			<property name="pollingFrequency" value="500000"/>
			<property name="autoDelete" value="true"/>
		</properties>
	</connector>
	
	<connector name="vmQueue" className="org.mule.providers.vm.VMConnector">
		<properties>
			<property name="queueEvents" value="true"/>
		</properties>
	</connector>
	
	
	<!-- MODEL -->
	<model name="testSftp">

	<mule-descriptor name="sftpDownload"
		implementation="org.mule.providers.sftp.components.ReceiveLargeFileTestHelperComponent">
		<inbound-router>
				<endpoint address="sftp://mule:test123@localhost/files/sftp-source" 
					connector="sftpConnector">
				<filter pattern="*.zip"
					className="org.mule.providers.file.filters.FilenameWildcardFilter"/>
			</endpoint>
		</inbound-router>
		<outbound-router>
		     <router className="org.mule.routing.outbound.OutboundPassThroughRouter">
				<endpoint address="vm://test.download" connector="vmQueue"/>
		     </router>
		</outbound-router>
	</mule-descriptor>


	</model>
</mule-configuration>


