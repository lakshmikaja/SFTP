<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mule-configuration PUBLIC "-//SymphonySoft //DTD mule-configuration XML V1.0//EN"
"http://www.symphonysoft.com/dtds/mule/mule-configuration.dtd">
<mule-configuration id="SFTP_TEST" version="1.0">
  <description>Sftp testing.</description>
  <mule-environment-properties synchronous="true" />
  <!-- SFTP-connector -->
  <connector name="sftpConnector" className="org.mule.providers.sftp.SftpConnector">
    <properties>
      <property name="outputPattern" value="${DATE}.dat" />
      <property name="fileExtension" value="*" />
      <property name="pollingFrequency" value="10000" />
    </properties>
  </connector>
 <connector name="vmQueue" className="org.mule.providers.vm.VMConnector"> 
        <properties> 
            <property name="queueEvents" value="true"/> 
        </properties> 
    </connector> 
  <!-- MODEL -->
  <model name="testSftp">

	<mule-descriptor name="sftpSend"
		implementation="org.mule.components.simple.BridgeComponent">
		<inbound-router>
			<endpoint address="vm://test.upload"/>
		</inbound-router>
		<outbound-router>
			<router
				className="org.mule.routing.outbound.OutboundPassThroughRouter">
				<endpoint
					address="sftp://mule:test123@localhost/files/sftp-target"
					connector="sftpConnector"/>
			</router>
		</outbound-router>
		
	</mule-descriptor>
	<mule-descriptor name="sftpReceive"
		implementation="org.mule.components.simple.BridgeComponent">
		<inbound-router>
			<endpoint address="sftp://mule:test123@localhost/files/sftp-target"/>
		</inbound-router>
		<outbound-router>
			<router
				className="org.mule.routing.outbound.OutboundPassThroughRouter">
			<endpoint address="vm://test.download" connector="vmQueue"/>
			</router>
		</outbound-router>
		
	</mule-descriptor>
	    </model>
</mule-configuration>


